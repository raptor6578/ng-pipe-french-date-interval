{"version":3,"file":"date-interval.pipe.js","sourceRoot":"","sources":["../date-interval.pipe.ts"],"names":[],"mappings":";;;;;;AAAA,aAAa;AACb,OAAO,EAAE,IAAI,EAAiB,MAAM,eAAe,CAAC;AACpD,OAAO,aAAa,CAAC;AAKrB;IAAA;IA6DA,CAAC;IA5DC,oCAAS,GAAT,UAAU,SAAiB;QACzB,WAAW,CAAC,IAAI,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;QAC5F,WAAW,CAAC,MAAM,GAAG;YACnB,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS;YAC/F,UAAU,EAAE,UAAU;SACvB,CAAC;QAEF,IAAM,WAAW,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,EAAE,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;QAClE,IAAM,OAAO,GAAG,WAAW,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACpD,IAAM,OAAO,GAAG,WAAW,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACpD,IAAM,WAAW,GAAG,WAAW,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAEpD,IAAM,YAAY,GAAG,UAAC,GAAW;YAC/B,OAAO,WAAW,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,GAAG,GAAG,QAAQ,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACpF,CAAC,CAAC;QAEF,IAAI,OAAO,KAAK,OAAO,EAAE;YACvB,IAAM,IAAI,GAAG,WAAW,CAAC,OAAO,EAAE,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;YAE3D,IAAI,IAAI,GAAG,IAAI,EAAE;gBACf,OAAO,cAAc,CAAC;aAEvB;iBAAM,IAAI,IAAI,GAAG,KAAK,EAAE;gBACvB,OAAO,YAAU,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,cAAW,CAAC;aAErD;iBAAM,IAAI,IAAI,GAAG,OAAO,EAAE;gBACzB,OAAO,YAAU,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,aAAU,CAAC;aAErD;iBAAM,IAAI,IAAI,GAAG,QAAQ,EAAE;gBAC1B,OAAO,YAAU,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,YAAS,CAAC;aAEtD;iBAAM;gBACL,OAAO,wBAAkB,WAAa,CAAC;aACxC;SAEF;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,iBAAU,WAAa,CAAC;SAEhC;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,gCAAoB,WAAa,CAAC;SAE1C;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,gCAAoB,WAAa,CAAC;SAE1C;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,gCAAoB,WAAa,CAAC;SAE1C;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,gCAAoB,WAAa,CAAC;SAE1C;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,gCAAoB,WAAa,CAAC;SAE1C;aAAM,IAAI,OAAO,KAAK,YAAY,CAAC,CAAC,CAAC,EAAE;YACtC,OAAO,kCAAsB,WAAa,CAAC;SAE5C;aAAM;YACL,OAAU,OAAO,gBAAM,WAAa,CAAC;SACtC;IACH,CAAC;IA5DU,gBAAgB;QAF5B,IAAI,CAAC,EAAC,IAAI,EAAE,cAAc,EAAC,CAAC;OAEhB,gBAAgB,CA6D5B;IAAD,uBAAC;CAAA,AA7DD,IA6DC;SA7DY,gBAAgB","sourcesContent":["// @ts-ignore\nimport { Pipe, PipeTransform } from '@angular/core';\nimport 'date_format';\ndeclare const date_format: any;\n\n@Pipe({name: 'dateInterval'})\n\nexport class DateIntervalPipe implements PipeTransform {\n  transform(timestamp: number): string {\n    date_format.days = ['Lundi', 'Mardi', 'Mecredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'];\n    date_format.months = [\n      'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre',\n      'Novembre', 'Décembre'\n    ];\n\n    const compareDate = new Date(timestamp), currentDate = new Date();\n    const compare = date_format(compareDate, 'D d F Y');\n    const current = date_format(currentDate, 'D d F Y');\n    const compareTime = date_format(compareDate, 'H:i');\n\n    const previousDays = (int: number) => {\n      return date_format(new Date(currentDate.getTime() - (int * 86400000)), 'D d F Y');\n    };\n\n    if (compare === current) {\n      const diff = currentDate.getTime() - compareDate.getTime();\n\n      if (diff < 5000) {\n        return 'à l\\'instant';\n\n      } else if (diff < 60000) {\n        return `Il y a ${Math.floor(diff / 1000)} secondes`;\n\n      } else if (diff < 3600000) {\n        return `Il y a ${Math.floor(diff / 60000)} minutes`;\n\n      } else if (diff < 10800000) {\n        return `Il y a ${Math.floor(diff / 3600000)} heures`;\n\n      } else {\n        return `Aujourd\\'hui à ${compareTime}`;\n      }\n\n    } else if (compare === previousDays(1)) {\n      return `Hier à ${compareTime}`;\n\n    } else if (compare === previousDays(2)) {\n      return `Il y à 2 jours à ${compareTime}`;\n\n    } else if (compare === previousDays(3)) {\n      return `Il y à 3 jours à ${compareTime}`;\n\n    } else if (compare === previousDays(4)) {\n      return `Il y à 4 jours à ${compareTime}`;\n\n    } else if (compare === previousDays(5)) {\n      return `Il y à 5 jours à ${compareTime}`;\n\n    } else if (compare === previousDays(6)) {\n      return `Il y à 6 jours à ${compareTime}`;\n\n    } else if (compare === previousDays(7)) {\n      return `Il y à 1 semaine à ${compareTime}`;\n\n    } else {\n      return `${compare} à ${compareTime}`;\n    }\n  }\n}\n"]}